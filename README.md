# Beauty Salon Telegram Bot

Telegram –±–æ—Ç –¥–ª—è —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –≤—ñ—Ä—Ç—É–∞–ª—å–Ω–∏–º —Å–∞–ª–æ–Ω–æ–º –∫—Ä–∞—Å–∏, —è–∫–∏–π –¥–æ–ø–æ–º–∞–≥–∞—î –∫–ª—ñ—î–Ω—Ç–∞–º –∑–∞–ø–∏—Å—É–≤–∞—Ç–∏—Å—è –Ω–∞ –ø–æ—Å–ª—É–≥–∏, –æ–±–∏—Ä–∞—Ç–∏ –º–∞–π—Å—Ç—Ä—ñ–≤ —Ç–∞ –∫–µ—Ä—É–≤–∞—Ç–∏ —Å–≤–æ—ó–º–∏ –∑–∞–ø–∏—Å–∞–º–∏.

## üöÄ –ü–æ—Ç–æ—á–Ω–∏–π —Å—Ç–∞—Ç—É—Å —Ä–æ–∑—Ä–æ–±–∫–∏

### –†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ
- ‚úÖ –ë–∞–∑–æ–≤–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç—É
- ‚úÖ –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ Telegram API (Mubble)
- ‚úÖ –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è PostgreSQL –∑ asyncpg
- ‚úÖ –ú–æ–¥–µ–ª—ñ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó —Ç–∞ –æ—á–∏—â–µ–Ω–Ω—è –ë–î
- ‚úÖ –ë–∞–∑–æ–≤–∏–π –æ–±—Ä–æ–±–Ω–∏–∫ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å

### –í —Ä–æ–∑—Ä–æ–±—Ü—ñ
- üîÑ –ü—Ä–æ–º–ø—Ç –¥–ª—è LLM –º–æ–¥–µ–ª—ñ
- üîÑ –§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª —Ä–æ–±–æ—Ç–∏ –∑ –±–∞–∑–æ—é –¥–∞–Ω–∏—Ö
- üîÑ –Ü–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏ –¥–ª—è –æ–±—Ä–æ–±–∫–∏ –∑–∞–ø–∏—Ç—ñ–≤
- üîÑ –õ–æ–≥—ñ–∫–∞ –∑–∞–ø–∏—Å—É –Ω–∞ –ø–æ—Å–ª—É–≥–∏
- üîÑ –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è —Å–ª–æ—Ç–∞–º–∏

## üöÄ –§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ—Å—Ç—å

### –û—Å–Ω–æ–≤–Ω—ñ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ
- ü§ñ –Ü–Ω—Ç–µ–ª—ñ–≥–µ–Ω—Ç–Ω–∏–π —á–∞—Ç-–±–æ—Ç –∑ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è–º GPT-4
- üìÖ –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –∑–∞–ø–∏—Å–∞–º–∏ –Ω–∞ –ø–æ—Å–ª—É–≥–∏
- üë©‚Äçüíº –í–∏–±—ñ—Ä –º–∞–π—Å—Ç—Ä—ñ–≤ —Ç–∞ —ó—Ö —Å–ø–µ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ–π
- üíÖ –ü–µ—Ä–µ–≥–ª—è–¥ –¥–æ—Å—Ç—É–ø–Ω–∏—Ö –ø–æ—Å–ª—É–≥ —Ç–∞ —Ü—ñ–Ω
- ‚è∞ –ü–µ—Ä–µ–≥–ª—è–¥ –≤—ñ–ª—å–Ω–∏—Ö —á–∞—Å–æ–≤–∏—Ö —Å–ª–æ—Ç–æ–≤
- üìù –Ü—Å—Ç–æ—Ä—ñ—è —á–∞—Ç—É –∑ –∫–ª—ñ—î–Ω—Ç–æ–º

### –ü–æ—Å–ª—É–≥–∏ —Å–∞–ª–æ–Ω—É
- –ú–∞–Ω–∏–∫—é—Ä
- –ü–µ–¥–∏–∫—é—Ä
- –ß–∏—Å—Ç–∫–∞ –æ–±–ª–∏—á—á—è
- –ö–æ—Ä—Ä–µ–∫—Ü—ñ—è –±—Ä–æ–≤–µ–π
- –õ–∞–º—ñ–Ω—É–≤–∞–Ω–Ω—è —Ä–µ—Å–Ω–∏—Ü—å
- –ú–∞—Å–∞–∂ –æ–±–ª–∏—á—á—è
- –í–æ—Å–∫–æ–≤–∞ –µ–ø—ñ–ª—è—Ü—ñ—è
- –°–ü–ê-–æ—Ö–æ–¥ –¥–ª—è —Ä—É–∫

## üõ† –¢–µ—Ö–Ω—ñ—á–Ω–∏–π —Å—Ç–µ–∫

### –û—Å–Ω–æ–≤–Ω—ñ —Ç–µ—Ö–Ω–æ–ª–æ–≥—ñ—ó
- Python 3.12
- PostgreSQL (asyncpg)
- Tortoise ORM
- Mubble (Telegram Bot Framework)
- LangChain
- OpenAI GPT-4

### –ë–∞–∑–∞ –¥–∞–Ω–∏—Ö
- –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–µ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è —á–µ—Ä–µ–∑ asyncpg
- –ú–æ–¥–µ–ª—ñ:
  - User (–∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ)
  - ChatHistory (—ñ—Å—Ç–æ—Ä—ñ—è —á–∞—Ç—É)
  - Service (–ø–æ—Å–ª—É–≥–∏)
  - Master (–º–∞–π—Å—Ç—Ä–∏)
  - Slot (—á–∞—Å–æ–≤—ñ —Å–ª–æ—Ç–∏)
  - Appointment (–∑–∞–ø–∏—Å–∏)
  - System (—Å–∏—Å—Ç–µ–º–Ω—ñ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è)

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç—É

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ç–∞ –∑–∞–ø—É—Å–∫

1. –ö–ª–æ–Ω—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π:
```bash
git clone [url-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é]
cd langchain-bot
```

2. –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ:
```bash
poetry install
```

3. –°—Ç–≤–æ—Ä—ñ—Ç—å —Ñ–∞–π–ª .env —Ç–∞ –∑–∞–ø–æ–≤–Ω—ñ—Ç—å –π–æ–≥–æ:
```env
OPENAI_TOKEN=your_openai_token
BOT_TOKEN=your_telegram_bot_token
DB_PASSWORD=your_db_password
DB_ADDRESS=localhost
DB_PORT=5432
DB_NAME=langchain_bot
```

4. –°—Ç–≤–æ—Ä—ñ—Ç—å –±–∞–∑—É –¥–∞–Ω–∏—Ö PostgreSQL:
```bash
createdb langchain_bot
```

5. –ó–∞–ø—É—Å—Ç—ñ—Ç—å –±–æ—Ç–∞:
```bash
python -m app
```

## üîÑ –ü–æ—Ç–æ—á–Ω–∏–π –ø—Ä–æ—Ü–µ—Å —Ä–æ–±–æ—Ç–∏

1. –ü—Ä–∏ –∑–∞–ø—É—Å–∫—É –±–æ—Ç–∞:
   - –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑—É—î—Ç—å—Å—è –±–∞–∑–∞ –¥–∞–Ω–∏—Ö
   - –°—Ç–≤–æ—Ä—é—é—Ç—å—Å—è –Ω–µ–æ–±—Ö—ñ–¥–Ω—ñ —Ç–∞–±–ª–∏—Ü—ñ
   - –ì–µ–Ω–µ—Ä—É—é—Ç—å—Å—è –¥–µ–º–æ-–¥–∞–Ω—ñ (–ø–æ—Å–ª—É–≥–∏, –º–∞–π—Å—Ç—Ä–∏, —Å–ª–æ—Ç–∏)
   - –û–Ω–æ–≤–ª—é—î—Ç—å—Å—è —Å–∏—Å—Ç–µ–º–Ω–∏–π –ø—Ä–æ–º–ø—Ç –¥–ª—è –≤—Å—ñ—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤

2. –ü—Ä–∏ –ø–µ—Ä—à–æ–º—É –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—ñ –≤—ñ–¥ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞:
   - –°—Ç–≤–æ—Ä—é—î—Ç—å—Å—è –∑–∞–ø–∏—Å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
   - –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑—É—î—Ç—å—Å—è —ñ—Å—Ç–æ—Ä—ñ—è —á–∞—Ç—É
   - –í—Å—Ç–∞–Ω–æ–≤–ª—é—î—Ç—å—Å—è –∫–æ–Ω—Ç–µ–∫—Å—Ç –¥–ª—è –æ–±—Ä–æ–±–∫–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç—É
langchain-bot/
‚îú‚îÄ‚îÄ app/ # –ì–æ–ª–æ–≤–Ω–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—è –¥–æ–¥–∞—Ç–∫—É
‚îÇ ‚îú‚îÄ‚îÄ database/ # –ú–æ–¥—É–ª—å —Ä–æ–±–æ—Ç–∏ –∑ –±–∞–∑–æ—é –¥–∞–Ω–∏—Ö
‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ user.py # –ú–æ–¥–µ–ª—å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ chat_history.py # –ú–æ–¥–µ–ª—å —ñ—Å—Ç–æ—Ä—ñ—ó —á–∞—Ç—É
‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ service.py # –ú–æ–¥–µ–ª—å –ø–æ—Å–ª—É–≥ —Å–∞–ª–æ–Ω—É
‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ master.py # –ú–æ–¥–µ–ª—å –º–∞–π—Å—Ç—Ä—ñ–≤
‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ slot.py # –ú–æ–¥–µ–ª—å —á–∞—Å–æ–≤–∏—Ö —Å–ª–æ—Ç—ñ–≤
‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ appointment.py # –ú–æ–¥–µ–ª—å –∑–∞–ø–∏—Å—ñ–≤
‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ system.py # –ú–æ–¥–µ–ª—å —Å–∏—Å—Ç–µ–º–Ω–∏—Ö –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å
‚îÇ ‚îÇ
‚îÇ ‚îú‚îÄ‚îÄ handlers/ # –û–±—Ä–æ–±–Ω–∏–∫–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å
‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ middlewares/ # –ü—Ä–æ–º—ñ–∂–Ω—ñ –æ–±—Ä–æ–±–Ω–∏–∫–∏
‚îÇ ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ context.py # Middleware –¥–ª—è –∫–æ–Ω—Ç–µ–∫—Å—Ç—É
‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ text.py # –û–±—Ä–æ–±–Ω–∏–∫ —Ç–µ–∫—Å—Ç–æ–≤–∏—Ö –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å
‚îÇ ‚îÇ
‚îÇ ‚îú‚îÄ‚îÄ llm/ # –ú–æ–¥—É–ª—å —Ä–æ–±–æ—Ç–∏ –∑ LLM
‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ prompts/ # –ü—Ä–æ–º–ø—Ç–∏ –¥–ª—è –º–æ–¥–µ–ª—ñ
‚îÇ ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ entry.txt # –ë–∞–∑–æ–≤–∏–π –ø—Ä–æ–º–ø—Ç
‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ wrapper.py # –û–±–≥–æ—Ä—Ç–∫–∞ –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ LLM
‚îÇ ‚îÇ
‚îÇ ‚îú‚îÄ‚îÄ utils/ # –î–æ–ø–æ–º—ñ–∂–Ω—ñ —É—Ç–∏–ª—ñ—Ç–∏
‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ auto_cleaner.py # –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –æ—á–∏—Å—Ç–∫–∞ —ñ—Å—Ç–æ—Ä—ñ—ó
‚îÇ ‚îÇ
‚îÇ ‚îú‚îÄ‚îÄ config.py # –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è –ø—Ä–æ–µ–∫—Ç—É
‚îÇ ‚îî‚îÄ‚îÄ main.py # –¢–æ—á–∫–∞ –≤—Ö–æ–¥—É –≤ –¥–æ–¥–∞—Ç–æ–∫
‚îÇ
‚îú‚îÄ‚îÄ .env # –§–∞–π–ª –∑ –∑–º—ñ–Ω–Ω–∏–º–∏ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞
‚îî‚îÄ‚îÄ pyproject.toml # –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è Poetry



## üìù –ü–ª–∞–Ω–æ–≤–∞–Ω–∏–π —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª

### –ü—Ä–æ–º–ø—Ç –¥–ª—è LLM –º–æ–¥–µ–ª—ñ
- [ ] –í–∏–∑–Ω–∞—á–µ–Ω–Ω—è —Ä–æ–ª—ñ —Ç–∞ –ø–æ–≤–µ–¥—ñ–Ω–∫–∏ –±–æ—Ç–∞
- [ ] –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥—ñ–∞–ª–æ–≥—É –∑ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–µ–º
- [ ] –û–±—Ä–æ–±–∫–∞ –∑–∞–ø–∏—Ç—ñ–≤ –Ω–∞ –∑–∞–ø–∏—Å
- [ ] –†–æ–±–æ—Ç–∞ –∑ —Ä–æ–∑–∫–ª–∞–¥–æ–º
- [ ] –û–±—Ä–æ–±–∫–∞ —Å–∫–∞—Å—É–≤–∞–Ω–Ω—è –∑–∞–ø–∏—Å—É

### –§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª —Ä–æ–±–æ—Ç–∏ –∑ –ë–î
- [ ] –ó–∞–ø–∏—Å –Ω–∞ –ø–æ—Å–ª—É–≥–∏
- [ ] –ü–µ—Ä–µ–≥–ª—è–¥ –¥–æ—Å—Ç—É–ø–Ω–∏—Ö —Å–ª–æ—Ç—ñ–≤
- [ ] –í–∏–±—ñ—Ä –º–∞–π—Å—Ç—Ä–∞
- [ ] –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –∑–∞–ø–∏—Å–∞–º–∏
- [ ] –°–∫–∞—Å—É–≤–∞–Ω–Ω—è –∑–∞–ø–∏—Å—É
- [ ] –Ü—Å—Ç–æ—Ä—ñ—è –≤—ñ–¥–≤—ñ–¥—É–≤–∞–Ω—å

## üîí –ë–µ–∑–ø–µ–∫–∞

- –ë–µ–∑–ø–µ—á–Ω–µ –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è —Ç–æ–∫–µ–Ω—ñ–≤ —É .env —Ñ–∞–π–ª—ñ
- –í–∞–ª—ñ–¥–∞—Ü—ñ—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—Ü—å–∫–æ–≥–æ –≤–≤–æ–¥—É
- –ó–∞—Ö–∏—Å—Ç –≤—ñ–¥ –ø–µ—Ä–µ–ø–æ–≤–Ω–µ–Ω–Ω—è —ñ—Å—Ç–æ—Ä—ñ—ó —á–∞—Ç—É
- –û–±–º–µ–∂–µ–Ω–Ω—è –Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å —Ç–∞ —Ç–æ–∫–µ–Ω—ñ–≤

## üìà –ü–æ–¥–∞–ª—å—à—ñ –ø–ª–∞–Ω–∏

- [ ] –†–æ–∑—Ä–æ–±–∫–∞ –ø—Ä–æ–º–ø—Ç—É –¥–ª—è LLM
- [ ] –†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ñ–≤ –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ –ë–î
- [ ] –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è —Ç–∞ –Ω–∞–ª–∞–≥–æ–¥–∂–µ–Ω–Ω—è
- [ ] –î–æ–¥–∞–≤–∞–Ω–Ω—è —Å–∏—Å—Ç–µ–º–∏ –≤—ñ–¥–≥—É–∫—ñ–≤
- [ ] –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ –ø–ª–∞—Ç—ñ–∂–Ω–æ—é —Å–∏—Å—Ç–µ–º–æ—é
- [ ] –†–æ–∑—à–∏—Ä–µ–Ω–Ω—è —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—É –¥–ª—è –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä—ñ–≤
